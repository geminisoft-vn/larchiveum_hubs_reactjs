import{r as q,j as e,u as N,a as T,h as c,B as v,L as $,b as I,s as h,A,p as _,c as Y,S as E,T as b,d as m,e as H,I as U,M as F,f as W,g as G}from"./index-bbadcd21.js";import{r as x,i as f}from"./createSvgIcon-3ac82221.js";import{y as D,i as z,P as J}from"./Pagination-c8d981c4.js";import{G as k}from"./Grid-c02e8b16.js";import{C as K}from"./Card-f9a13e80.js";import{C as Q}from"./CardContent-61db9666.js";import{P as X}from"./Popper-63a1a74c.js";import{S as Z}from"./Select-98eac33f.js";import{u as ee}from"./useData-ff66413d.js";import{E as te,L as ae}from"./Empty-9fb8ccd4.js";import"./isMuiElement-dbbb1042.js";import"./useControlled-086bd1ce.js";import"./LastPage-1e04867a.js";import"./index-1aacdabe.js";import"./useFormControl-a2267305.js";import"./CircularProgress-8909a85d.js";class re{static create(o){return q.post("/reservations",o).then(r=>r.data.data)}}var y={},se=f;Object.defineProperty(y,"__esModule",{value:!0});var w=y.default=void 0,ne=se(x()),oe=e,ie=(0,ne.default)((0,oe.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"}),"PublicRounded");w=y.default=ie;var R={},ce=f;Object.defineProperty(R,"__esModule",{value:!0});var B=R.default=void 0,le=ce(x()),de=e,ue=(0,le.default)((0,de.jsx)("path",{d:"m11.19 1.36-7 3.11C3.47 4.79 3 5.51 3 6.3V11c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V6.3c0-.79-.47-1.51-1.19-1.83l-7-3.11c-.51-.23-1.11-.23-1.62 0zM12 11.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"}),"SecurityRounded");B=R.default=ue;var S={},pe=f;Object.defineProperty(S,"__esModule",{value:!0});var P=S.default=void 0,ve=pe(x()),he=e,xe=(0,ve.default)((0,he.jsx)("path",{d:"M10.3 7.7c-.39.39-.39 1.01 0 1.4l1.9 1.9H3c-.55 0-1 .45-1 1s.45 1 1 1h9.2l-1.9 1.9c-.39.39-.39 1.01 0 1.4.39.39 1.01.39 1.4 0l3.59-3.59c.39-.39.39-1.02 0-1.41L11.7 7.7a.9839.9839 0 0 0-1.4 0zM20 19h-7c-.55 0-1 .45-1 1s.45 1 1 1h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-7c-.55 0-1 .45-1 1s.45 1 1 1h7v14z"}),"LoginRounded");P=S.default=xe;var M={},fe=f;Object.defineProperty(M,"__esModule",{value:!0});var O=M.default=void 0,me=fe(x()),ge=e,je=(0,me.default)((0,ge.jsx)("path",{d:"M18 19H6c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h5c.55 0 1-.45 1-1s-.45-1-1-1H5c-1.11 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-6c0-.55-.45-1-1-1s-1 .45-1 1v5c0 .55-.45 1-1 1zM14 4c0 .55.45 1 1 1h2.59l-9.13 9.13c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L19 6.41V9c0 .55.45 1 1 1s1-.45 1-1V4c0-.55-.45-1-1-1h-5c-.55 0-1 .45-1 1z"}),"OpenInNewRounded");O=M.default=je;var C={},be=f;Object.defineProperty(C,"__esModule",{value:!0});var L=C.default=void 0,_e=be(x()),ye=e,Re=(0,_e.default)((0,ye.jsx)("path",{d:"M22 8.54V6c0-1.1-.9-2-2-2H4c-1.1 0-1.99.89-1.99 2v2.54c0 .69.33 1.37.94 1.69C3.58 10.58 4 11.24 4 12s-.43 1.43-1.06 1.76c-.6.33-.94 1.01-.94 1.7V18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-2.54c0-.69-.34-1.37-.94-1.7-.63-.34-1.06-1-1.06-1.76s.43-1.42 1.06-1.76c.6-.33.94-1.01.94-1.7zm-9 8.96h-2v-2h2v2zm0-4.5h-2v-2h2v2zm0-4.5h-2v-2h2v2z"}),"ConfirmationNumberRounded");L=C.default=Re;const Se=({room:t,handleReservate:o})=>{const{t:r}=N(),{user:s}=T();return t.startDate&&c(t.startDate).isAfter(c())&&(t.public||t.reservated)?e.jsxs(v,{sx:{background:D[700],"&.MuiButtonBase-root:hover":{background:D[900]}},children:[r("BUTTON.incoming")," ",c(t.startDate).format("MMMM DD")]}):s&&!t.reservated&&!t.public&&t.reservationCount<t.maxSize?e.jsx(v,{endIcon:e.jsx(L,{}),variant:"contained",color:"secondary",onClick:()=>o(t.id),children:r("BUTTON.reservate")}):s&&!t.public&&t.reservated||(!t.startDate||!t.endDate)&&t.public||t.startDate&&c(t.startDate).isBefore(c())&&t.public?e.jsx($,{href:`https://larchiveum.link/${t.roomId}`,target:"_blank",children:e.jsx(v,{variant:"contained",endIcon:e.jsx(O,{}),children:r("BUTTON.enter")})}):s&&t.reservationCount>=t.maxSize?e.jsx(v,{variant:"contained",disabled:!0,sx:{background:I[700],"&.MuiButtonBase-root:hover":{background:I[900]}},children:r("BUTTON.full")}):!s&&!t.public?e.jsx($,{to:"/auth/signin",children:e.jsx(v,{endIcon:e.jsx(P,{}),variant:"contained",sx:{background:z[700],"&.MuiButtonBase-root:hover":{background:z[900]}},children:r("BUTTON.login")})}):e.jsx("div",{})},Me=h("div")({position:"relative",paddingTop:"calc(100% * 3 / 4)"});h(A)(({theme:t})=>({zIndex:9,width:32,height:32,position:"absolute",left:t.spacing(3),bottom:t.spacing(-2)}));const Ce=h("div")(({theme:t})=>({display:"flex",alignItems:"center",flexWrap:"wrap",justifyContent:"flex-end",color:t.palette.text.disabled})),$e=h("img")({top:0,width:"100%",height:"100%",objectFit:"cover",position:"absolute"});V.propTypes={post:_.object.isRequired,index:_.number};function V({room:t,index:o,handleReservate:r}){const{hubSceneThumbnailUrl:s,name:i,reservationCount:l,maxSize:d,startDate:u,endDate:p,public:g}=t,a=o===0,n=o===1||o===2;return e.jsx(k,{item:!0,xs:12,sm:a?12:6,md:a?6:3,children:e.jsxs(K,{sx:{position:"relative"},children:[e.jsxs(Me,{sx:{...(a||n)&&{pt:"calc(100% * 4 / 3)","&:after":{top:0,content:"''",width:"100%",height:"100%",position:"absolute",bgcolor:j=>Y(j.palette.grey[900],.72)}},...a&&{pt:{xs:"calc(100% * 4 / 3)",sm:"calc(100% * 3 / 4.66)"}}},children:[e.jsx(E,{color:"paper",src:"/assets/icons/shape-avatar.svg",sx:{width:80,height:36,zIndex:9,bottom:-15,position:"absolute",color:"background.paper",...(a||n)&&{display:"none"}}}),e.jsx($e,{alt:i,src:s})]}),e.jsxs(Q,{sx:{pt:4,...(a||n)&&{bottom:0,width:"100%",position:"absolute"}},children:[(u||p)&&e.jsxs(b,{gutterBottom:!0,noWrap:!0,variant:"caption",sx:{color:"text.disabled",display:"block"},children:[u?c(u).format("DD/MM/YYYY"):null," ~"," ",p?c(p).format("DD/MM/YYYY"):null]}),e.jsxs(m,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(b,{variant:"h5",color:"inherit",underline:"hover",noWrap:!0,sx:{...a&&{typography:"h4"},...(a||n)&&{color:"common.white"}},children:i}),g?e.jsx(w,{sx:{color:"#000",...(a||n)&&{color:"#fff"}}}):e.jsx(B,{sx:{color:"#000",...(a||n)&&{color:"#fff"}}})]}),e.jsxs(m,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{marginTop:2},children:[e.jsx(Se,{room:t,handleReservate:r}),e.jsx(Ce,{children:e.jsxs(H,{sx:{display:"flex",alignItems:"center",ml:o===0?0:1.5,...(a||n)&&{color:"grey.500"}},children:[e.jsx(U,{icon:"eva:people-fill",sx:{width:16,height:16,mr:.5}}),e.jsxs(b,{variant:"caption",children:[l||0," / ",d]})]})})]})]})]})})}h(t=>e.jsx(X,{placement:"bottom-start",...t}))({width:"280px !important"});_.array.isRequired;function Ie({options:t,sort:o,handleSort:r}){return e.jsx(Z,{value:o,onChange:s=>r(s.target.value),MenuProps:{disableScrollLock:!0},children:t.map(s=>e.jsx(F,{value:s.value,children:s.label},s.value))})}const De=[{value:"createdAt|desc",label:"Latest"},{value:"createdAt|asc",label:"Oldest"}],Fe=()=>{const{user:t}=T(),{$emit:o}=G(),[r,s]=W.useState({page:1,pageSize:8,sort:"createdAt|desc"}),{data:i,pagination:l,isLoading:d,mutate:u}=ee(`/rooms?page=${r.page}&pageSize=${r.pageSize}&sort=${r.sort}`),p=a=>{o("alert/open",{title:"Make Reservation",content:"Do you want to make reservation of this room?",okCallback:()=>{re.create({roomId:a,userId:t.id}).then(()=>{u()})}})},g=a=>{s(n=>({...n,sort:a}))};return e.jsxs(e.Fragment,{children:[e.jsx(m,{mb:5,direction:"row",alignItems:"center",justifyContent:"space-between",children:e.jsx(Ie,{options:De,sort:r.sort,handleSort:g})}),!d&&i&&i.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(k,{container:!0,spacing:3,children:i.map((a,n)=>e.jsx(V,{room:a,index:n,handleReservate:p},a.id))}),e.jsx(m,{direction:"row",justifyContent:"center",sx:{my:2},children:e.jsx(J,{color:"primary",count:(l==null?void 0:l.total)||1,page:r.page,onChange:(a,n)=>s(j=>({...j,page:n}))})})]}),!d&&i&&i.length===0&&e.jsx(te,{}),d&&e.jsx(ae,{})]})};export{Fe as default};
